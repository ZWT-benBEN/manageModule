<link rel="stylesheet" href="/modules/css/treeview.css">
<link rel="stylesheet" href="index.scss">
<div class="content-wrapper detail-style mageUseradd">
    <link rel="import" href="modules/html/home/home.html?__inline">
    <div class="con_inner">
        <p class="import_star">*后面为必填项</p>
        <div class="add_info">
            <div class="add_inner">
                <div class="info_title">
                    <em style="width:16px;height:16px;background-image: url(__uri(static/images/add_info.png))"></em>
                    <span class="info_tname">添加权限</span>
                </div>
                <div class="info_body">
                    <form action="" class="form-inline">
                        <p class="formGroup">
                            <label><span class="import_star">*</span>权限名称</label>
                            <input type="text" class="form-control">
                        </p>
                        <p class="formGroup">
                            <label><span class="import_star">*</span>url</label>
                            <input type="text" class="form-control">
                        </p>
                        <p class="formGroup">
                            <label><span class="import_star">*</span>排序权重</label>
                            <input type="text" class="form-control">
                        </p>
                        <p class="formGroup">
                            <label><span class="import_star">*</span>是否系统功能</label>
                            <select name="" id="isFunc" class="form-control">
                                <option value="否">否</option>
                                <option value="是">是</option>
                            </select>
                        </p>
                        <p class="formGroup changeMenu">
                            <label><span class="import_star">*</span>菜单项</label>
                            <select name="" id="isMenu" class="form-control">
                                <option value="非菜单项">非菜单项</option>
                                <option value="二级菜单">二级菜单</option>
                                <option value="一级菜单">一级菜单</option>
                            </select>
                        </p>
                        <div class="formGroup fatherSet">
                            <label><span class="import_star">*</span>父节点设定</label>
                            <ul id="treeDemos" class="ztree"></ul>
                        </div>
                        <p class="pay_warn hide"><b class="import_star">*</b>****不能为空</p>
                    </form>
                    <p class="regist_btn">
                        <a href="javascript:;" class="btn_save">保存</a>
                        <a href="javascript:;" class="btn_save btn_cancel">取消</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    require('/modules/js/jquery.ztree.core.min');
    require('/modules/js/jquery.ztree.excheck.min');
    require('/modules/js/jquery.ztree.exedit.min');
    var setting = {
        view: {
            addHoverDom: false,
            removeHoverDom: false,
            selectedMulti: false
        },
        check: {
            enable: true,
            chkStyle: "radio",
            nocheckInherit: true,
            radioType: "all"
        },
        data: {
            simpleData: {
                enable: true
            }
        },
        edit: {
            enable: false
        }
    };

    var zNodes =[
        {id:1, pId:0, name:"首页管理", open:true,  chkDisabled:true},
            {id:101, pId:1, name:"KV广告管理", open:true},
            {id:102, pId:1, name:"推荐视频管理", open:true},
            {id:103, pId:1, name:"推荐资讯管理", open:true},
            {id:104, pId:1, name:"推荐资讯模块管理", open:true},
            {id:105, pId:1, name:"友情链接管理", open:true},
        {id:2, pId:0, name:"用户互动", open: true, chkDisabled:true},
            {id:201, pId:2, name:"意见反馈", open:true},
            {id:202, pId:2, name:"推送消息", open:true},
            {id:203, pId:2, name:"常见问题管理", open:true},
            {id:204, pId:2, name:"考生回复管理", open:true},
            {id:205, pId:2, name:"点赞统计", open:true},
            {id:206, pId:2, name:"举报统计", open:true},
            {id:207, pId:2, name:"一键吐槽", open:true},
        {id:3, pId:0, name:"行测题库", open: true, chkDisabled:true},
            {id:301, pId:3, name:"试卷管理", open:true},
            {id:302, pId:3, name:"题目管理", open:true},
            {id:303, pId:3, name:"题目纠错管理", open:true},
            {id:304, pId:3, name:"测试试卷管理", open:true},
            {id:305, pId:3, name:"在线模考管理", open:true},
            {id:306, pId:3, name:"题目参考解析管理", open:true},
            {id:307, pId:3, name:"题目参考解析评论管理", open:true},
        {id:4, pId:0, name:"公考资讯", open: true, chkDisabled:true},
            {id:401, pId:4, name:"资讯文章", open:true},
            {id:402, pId:4, name:"资讯模块", open:true},
            {id:403, pId:4, name:"资讯评论管理", open:true},
        {id:5, pId:0, name:"标签库", open: true, chkDisabled:true},
            {id:501, pId:5, name:"内容标签", open:true },
        {id:6, pId:0, name:"公考大师秀", open: true, chkDisabled:true},
            {id:601, pId:6, name:"正式节目", open:true},
            {id:602, pId:6, name:"节目预告", open:true},
            {id:603, pId:6, name:"拟邀嘉宾", open:true},
            {id:604, pId:6, name:"节目回顾", open:true},
            {id:605, pId:6, name:"推荐点评", open:true},
            {id:606, pId:6, name:"视频管理", open:true},
            {id:607, pId:6, name:"视频源管理", open:true},
            {id:608, pId:6, name:"考生点评", open:true},
        {id:7, pId:0, name:"直播管理课", open: true, chkDisabled:true},
            {id:701, pId:7, name:"直播课程管理", open:true},
            {id:702, pId:7, name:"直播听课用户管理", open:true},
            {id:703, pId:7, name:"直播课广告模板管理", open:true},
        {id:8, pId:0, name:"系统管理", open: true, chkDisabled:true},
            {id:801, pId:8, name:"APP版本管理", open:true},
            {id:802, pId:8, name:"调查问卷管理", open:true},
            {id:803, pId:8, name:"意见项管理", open:true},
            {id:804, pId:8, name:"文章管理", open:true},
            {id:805, pId:8, name:"视频频道", open:true},
            {id:806, pId:8, name:"系统字典", open:true},
        {id:9, pId:0, name:"启动页", open: true, chkDisabled:true},
            {id:901, pId:9, name:"APP欢迎界面", open:true},
            {id:902, pId:9, name:"广告管理", open:true},
        {id:10, pId:0, name:"市场渠道", open: true, chkDisabled:true},
            {id:1001, pId:10, name:"课程销售渠道", open:true},
            {id:1002, pId:10, name:"代理商管理", open:true},
            {id:1003, pId:10, name:"平台代理商管理", open:true},
        {id:11, pId:0, name:"财务核算", open: true, chkDisabled:true},
            {id:1101, pId:11, name:"订单管理", open:true},
        {id:12, pId:0, name:"考点管理", open: true, chkDisabled:true},
            {id:1201, pId:12, name:"考点管理", open:true},
            {id:1202, pId:12, name:"讲解纠错处理", open:true},
        {id:13, pId:0, name:"用户管理", open: true, chkDisabled:true},
            {id:1301, pId:13, name:"注册用户管理", open:true},
            {id:1302, pId:13, name:"后台用户管理", open:true},
            {id:1303, pId:13, name:"老师管理", open:true},
        {id:14, pId:0, name:"权限管理", open: true, chkDisabled:true},
            {id:1401, pId:14, name:"角色管理", open:true},
            {id:1402, pId:14, name:"权限管理", open:true},
        {id:15, pId:0, name:"代理渠道订单管理", open: true, chkDisabled:true},
            {id:1501, pId:15, name:"代理订单管理", open:true}
    ];

    $(document).ready(function(){
        $.fn.zTree.init($("#treeDemos"), setting, zNodes);
    });
    $('#isFunc').change(function() {
        if($(this).val() === '是') {
            $('.changeMenu').addClass('active');
            $('.fatherSet').addClass('active');
        } else {
            if($('#isMenu').val() === '一级菜单') {
                $('.changeMenu').removeClass('active');
                $('.fatherSet').addClass('active');
            } else {
                $('.fatherSet').removeClass('active');
                $('.changeMenu').removeClass('active');
            }
        }
    })
    $('#isMenu').change(function() {
        if($(this).val() === '一级菜单') {
            $('.fatherSet').addClass('active');
            $('#isFunc').change(function() {
                if($(this).val() === '是') {
                    $('.changeMenu').addClass('active');
                    $('.fatherSet').addClass('active');
                } else {
                     if($('#isMenu').val() === '一级菜单') {
                        $('.changeMenu').removeClass('active');
                        $('.fatherSet').addClass('active');
                    } else {
                        $('.fatherSet').removeClass('active');
                        $('.changeMenu').removeClass('active');
                    }
                }
            })
        } else if($(this).val() === '二级菜单') {
            $('.fatherSet').removeClass('active');
            for(var i = 0; i < zNodes.length; i++) {
                if (zNodes[i].pId === 0) {
                    zNodes[i].chkDisabled = false;
                     $.fn.zTree.init($("#treeDemos"), setting, zNodes);
                } else {
                    zNodes[i].chkDisabled = true;
                    $.fn.zTree.init($("#treeDemos"), setting, zNodes);
                }
            }
        } else if($(this).val() === '非菜单项') {
            $('.fatherSet').removeClass('active');
            for(var i = 0; i < zNodes.length; i++) {
                if (zNodes[i].pId === 0) {
                    zNodes[i].chkDisabled = true;
                     $.fn.zTree.init($("#treeDemos"), setting, zNodes);
                } else {
                    zNodes[i].chkDisabled = false;
                    $.fn.zTree.init($("#treeDemos"), setting, zNodes);
                }
            }
        }
    })
</script>

